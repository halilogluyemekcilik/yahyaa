<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mini Wordle (TR)</title>
    <style>
        :root {
            --bg: #0b1020;
            --text: #e5e7eb;
            --muted: #9ca3af;
            --ok: #16a34a;
            --mid: #eab308;
            --no: #374151;
            --shadow: 0 10px 30px rgba(0, 0, 0, .35);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            background: linear-gradient(180deg, var(--bg), #0b1328);
            color: var(--text);
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation
        }

        .wrap {
            width: min(900px, 92%);
            margin: 32px auto 60px
        }

        h1 {
            margin: 0 0 6px;
            font-size: clamp(28px, 5vw, 40px);
            text-align: center;
        }

        p.lead {
            margin: 0 0 16px;
            color: var(--muted);
            text-align: center;
        }

        .game {
            display: grid;
            gap: 16px;
            justify-items: center;
            margin-top: 18px
        }

        .grid {
            display: grid;
            gap: 8px;
            justify-content: center;
            width: 100%;
            max-width: 100%;
        }

        .row {
            display: grid;
            gap: 8px;
            grid-auto-flow: column;
            justify-content: center
        }

        .tile {
            width: var(--tile-size, 54px);
            height: var(--tile-size, 54px);
            min-width: 40px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, .18);
            background: rgba(255, 255, 255, .03);
            font-weight: 800;
            font-size: 1.25rem;
            text-transform: uppercase;
            box-shadow: var(--shadow);
            aspect-ratio: 1;
            transition: transform .12s ease;
            will-change: transform;
        }

        .tile.filled {
            border-color: rgba(255, 255, 255, .28);
            transform: scale(1.04);
            z-index: 1;
        }

        .tile.correct {
            background: var(--ok);
            border-color: var(--ok);
            color: #fff
        }

        .tile.present {
            background: var(--mid);
            border-color: var(--mid);
            color: #000
        }

        .tile.absent {
            background: var(--no);
            border-color: var(--no);
            color: #d1d5db
        }

        @keyframes flip {
            0% {
                transform: rotateX(0)
            }

            50% {
                transform: rotateX(90deg)
            }

            100% {
                transform: rotateX(0)
            }
        }

        .tile.reveal {
            animation: flip .35s ease;
            transform-origin: center
        }

        .kbd {
            display: grid;
            gap: 8px;
            grid-template-rows: auto auto auto;
        }

        .kbd-row {
            display: grid;
            grid-auto-flow: column;
            gap: 8px;
            align-items: stretch;
        }

        .key {
            min-width: 40px;
            padding: 12px 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, .18);
            background: rgba(255, 255, 255, .04);
            color: var(--text);
            font-weight: 700;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            font-size: clamp(14px, 3.8vw, 18px)
        }

        .key.large {
            min-width: 50px;
            padding: 12px 16px;
        }

        .key.enter {
            min-width: 50px;
            padding: 12px 16px;
        }

        .key:hover {
            filter: brightness(1.07)
        }

        .key.correct {
            background: var(--ok);
            border-color: var(--ok);
            color: #fff
        }

        .key.present {
            background: var(--mid);
            border-color: var(--mid);
            color: #000
        }

        .key.absent {
            background: var(--no);
            border-color: var(--no);
            color: #d1d5db
        }

        .actions {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center
        }

        .btn {
            border: 0;
            border-radius: 999px;
            padding: 10px 16px;
            font-weight: 700;
            cursor: pointer;
            background: linear-gradient(135deg, #7c3aed, #22d3ee);
            color: #fff;
            box-shadow: var(--shadow)
        }

        .btn.out {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, .25);
            color: var(--text)
        }

        .status {
            color: var(--muted);
            min-height: 24px
        }

        dialog {
            border: 0;
            border-radius: 12px;
            padding: 18px;
            background: #0b1120;
            color: var(--text)
        }

        dialog::backdrop {
            background: rgba(0, 0, 0, .6)
        }

        .modal-content {
            text-align: center;
        }

        .modal-content h2 {
            margin: 0 0 16px;
            font-size: 1.5rem;
        }

        .modal-content p {
            margin: 0 0 20px;
            color: var(--muted);
        }

        .word-display {
            background: rgba(255, 255, 255, .05);
            border: 1px solid rgba(255, 255, 255, .1);
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }

        .word-display strong {
            color: var(--ok);
            font-size: 1.2rem;
        }

        /* Hidden focusable input to summon mobile OS keyboard */
        .sr-input {
            position: fixed;
            left: -10000px;
            width: 1px;
            height: 1px;
            opacity: 0.01;
            pointer-events: none;
            background: transparent;
            border: 0;
            color: transparent;
            caret-color: transparent;
        }

        .field {
            margin: 10px 0
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 700
        }

        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, .18);
            background: rgba(255, 255, 255, .03);
            color: var(--text);
            outline: transparent
        }

        small.error {
            color: #fca5a5;
            min-height: 18px;
            display: block
        }

        @media (max-width:520px) {
            .wrap {
                width: min(900px, 94%);
                margin: 16px auto 12px;
                padding-bottom: calc(10px + var(--safe-bottom));
            }

            .game {
                gap: 12px;
            }

            .grid {
                gap: 6px;
            }

            .row {
                gap: 6px;
            }

            /* Tiles auto-fit available width, keep perfect square via aspect-ratio */
            .tile {
                width: 100%;
                height: auto;
                min-width: 0;
                min-height: 0;
                aspect-ratio: 1;
                font-size: clamp(18px, 6vw, 22px);
            }

            /* Sticky on-screen keyboard with safe-area padding */
            .kbd {
                position: sticky;
                bottom: 0;
                padding: 10px 6px calc(10px + var(--safe-bottom));
                background: linear-gradient(180deg, rgba(11, 17, 32, 0.6), rgba(11, 17, 32, 0.95) 85%);
                backdrop-filter: blur(6px);
                -webkit-backdrop-filter: blur(6px);
                width: 100%;
            }

            .kbd-row {
                align-items: stretch;
            }

            .key {
                padding: 12px 10px;
                min-height: 44px;
            }

            .key.large,
            .key.enter {
                padding: 12px 14px;
            }

            /* Inputs at least 16px to avoid zoom */
            input[type="text"],
            input[type="number"] {
                font-size: 16px;
            }
        }

        @media (max-width:600px) {
            body {
                overflow-x: hidden;
            }

            .wrap {
                width: 100%;
                margin: 0;
                padding: 8px 6px 0;
                display: flex;
                flex-direction: column;
                min-height: 100svh;
            }

            h1 {
                font-size: 22px;
                margin-bottom: 4px;
            }

            p.lead {
                font-size: 12px;
                margin-bottom: 8px;
            }

            .game {
                gap: 12px;
                margin-top: 8px;
                flex: 1;
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
            }

            .grid {
                gap: 6px;
                max-width: 100%;
                padding: 0;
                min-height: 42svh;
                /* Consistent tile sizing across devices based on viewport width */
                --tile-size: calc((min(92svw, 520px) - (var(--cols, 5) - 1) * 6px) / var(--cols, 5));
            }

            .row {
                gap: 4px;
                width: 100%;
            }

            /* Daha bÃ¼yÃ¼k ve belirgin kutucuklar */
            .tile {
                width: 100%;
                height: auto;
                min-width: 0;
                min-height: 0;
                aspect-ratio: 1;
                font-size: calc(var(--tile-size, 48px) * 0.58);
                font-weight: 900;
                border-radius: 8px;
                border-width: 2px;
            }

            /* Klavye en altta sabit */
            .kbd {
                position: fixed;
                bottom: 44px;
                left: 0;
                right: 0;
                padding: 10px 6px calc(12px + var(--safe-bottom));
                background: linear-gradient(180deg, rgba(11, 17, 32, 0.85), rgba(11, 17, 32, 0.98) 80%);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                width: 100%;
                gap: 6px;
                box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4);
                z-index: 100;
            }

            .kbd-row {
                gap: 5px;
                justify-content: stretch;
                display: flex;
            }

            .key {
                padding: 16px 0;
                min-height: 50px;
                min-width: 0;
                flex: 1;
                font-size: 16px;
                border-radius: 6px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
            }

            .key.large,
            .key.enter {
                flex: 1.6;
                font-size: 14px;
                padding: 16px 6px;
            }

            .actions {
                gap: 8px;
                flex-wrap: wrap;
                padding-bottom: 0;
            }

            .btn {
                padding: 10px 14px;
                font-size: 14px;
            }

            .status {
                font-size: 13px;
                width: 100%;
                text-align: center;
            }

            /* Inputs at least 16px to avoid zoom */
            input[type="text"],
            input[type="number"] {
                font-size: 16px;
            }

            dialog {
                max-width: 90%;
                padding: 16px;
            }

            .modal-content h2 {
                font-size: 1.3rem;
            }
        }

        /* Desktop tweaks: slightly larger letters inside tiles */
        @media (min-width: 601px) {
            .tile {
                font-size: 1.4rem;
            }
        }

        /* Tablet layout (portrait/landscape): 601pxâ€“1024px */
        @media (min-width: 601px) and (max-width: 1024px) {
            .wrap {
                width: min(960px, 94%);
                margin: 20px auto 24px;
            }

            .grid {
                min-height: 48svh;
            }

            .kbd {
                position: sticky;
                bottom: 0;
                padding: 10px 10px 14px;
                background: linear-gradient(180deg, rgba(11, 17, 32, 0.5), rgba(11, 17, 32, 0.85) 85%);
                backdrop-filter: blur(6px);
                -webkit-backdrop-filter: blur(6px);
            }

            .kbd-row {
                gap: 8px;
            }

            .key {
                padding: 14px 12px;
                min-height: 46px;
                font-size: 15px;
            }

            .key.large,
            .key.enter {
                padding: 14px 14px;
            }

            .tile {
                font-size: 1.45rem;
            }
        }

        /* Desktop (>=1024px) */
        @media (min-width: 1024px) {
            .wrap {
                width: min(1000px, 90%);
            }

            .grid {
                gap: 6px;
            }

            .row {
                gap: 6px;
            }

            .tile {
                font-size: 1.2rem;
            }

            .kbd {
                position: static;
                padding: 0;
                background: transparent;
                backdrop-filter: none;
            }

            .kbd-row {
                gap: 6px;
            }

            .key {
                padding: 8px 10px;
                font-size: 13px;
            }
        }
    </style>
</head>

<body>
    <main class="wrap">
        <h1>Mini Wordle (TR)</h1>
        <p class="lead">Ã–nce gizli kelimeyi yaz; kelime uzunluÄŸuna gÃ¶re Ä±zgara oluÅŸur. 6 tahminde Ã§Ã¶zmeye Ã§alÄ±ÅŸ.</p>

        <div class="game">
            <div id="grid" class="grid" role="grid" aria-label="Wordle Ä±zgarasÄ±"></div>
            <!-- Hidden input to open mobile keyboard and capture typing -->
            <input id="mobile-input" class="sr-input" type="text" inputmode="latin" autocomplete="off"
                autocapitalize="characters" spellcheck="false" />
            <div id="kbd" class="kbd" aria-label="Ekran klavyesi"></div>
            <div class="actions">
                <button id="restart" class="btn out" type="button">Yeniden BaÅŸlat</button>
                <span id="status" class="status" aria-live="polite"></span>
            </div>
        </div>
    </main>

    <dialog id="setup" aria-label="Gizli kelime belirle">
        <form id="setup-form" method="dialog">
            <h3>Gizli Kelime</h3>
            <div class="field">
                <label for="secret">Kelime (3â€“10 harf)</label>
                <input id="secret" type="text" placeholder="Ã¶r. Ã‡Ä°Ã‡EK" required />
                <small class="error"></small>
            </div>
            <div class="field">
                <label for="tries">Hak SayÄ±sÄ±</label>
                <input id="tries" type="number" min="3" max="10" value="6" />
            </div>
            <div class="actions">
                <button class="btn" value="ok">BaÅŸlat</button>
                <button class="btn out" value="cancel" formnovalidate>VazgeÃ§</button>
            </div>
            <p class="status">TÃ¼rkÃ§e karakterler desteklenir: Ã‡ Äž Ä° I Ã– Åž Ãœ</p>
        </form>
    </dialog>

    <dialog id="congratulations" aria-label="Tebrikler">
        <div class="modal-content">
            <h2>ðŸŽ‰ Tebrikler! ðŸŽ‰</h2>
            <p>Kelimeyi doÄŸru tahmin ettiniz!</p>
            <div class="word-display">
                <strong>DoÄŸru Kelime: <span id="correct-word-win"></span></strong>
            </div>
            <div class="actions">
                <button class="btn" onclick="document.getElementById('congratulations').close(); openSetup();">Yeni
                    Oyun</button>
                <button class="btn out"
                    onclick="document.getElementById('congratulations').close(); document.getElementById('restart').style.display = 'block';">Kapat</button>
            </div>
        </div>
    </dialog>

    <dialog id="game-over" aria-label="Oyun Bitti">
        <div class="modal-content">
            <h2>ðŸ˜” Maalesef</h2>
            <p>TÃ¼m haklarÄ±nÄ±z bitti!</p>
            <div class="word-display">
                <strong>DoÄŸru Kelime: <span id="correct-word-lose"></span></strong>
            </div>
            <div class="actions">
                <button class="btn" onclick="document.getElementById('game-over').close(); openSetup();">Yeni
                    Oyun</button>
                <button class="btn out"
                    onclick="document.getElementById('game-over').close(); document.getElementById('restart').style.display = 'block';">Kapat</button>
            </div>
        </div>
    </dialog>

    <script>
        // -------- Mini Wordle (TR) --------
        const $ = (s, c = document) => c.querySelector(s);
        const $$ = (s, c = document) => Array.from(c.querySelectorAll(s));

        const setup = $('#setup');
        const form = $('#setup-form');
        const grid = $('#grid');
        const kbd = $('#kbd');
        const statusEl = $('#status');
        const restart = $('#restart');
        const congratsModal = $('#congratulations');
        const gameOverModal = $('#game-over');

        const toUp = s => (s || '').toLocaleUpperCase('tr-TR');
        const isLetter = ch => /^[A-ZÃ‡ÄžÄ°IÃ–ÅžÃœa-zÃ§ÄŸÄ±iÃ¶ÅŸÃ¼]$/i.test(ch);

        const KBD_ROWS = [
            ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'Äž', 'Ãœ', 'BACK'],
            ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'Åž', 'Ä°'],
            ['Z', 'X', 'C', 'V', 'B', 'N', 'M', 'Ã–', 'Ã‡', 'ENTER']
        ];

        let secret = '', wordLen = 5, maxRows = 6;
        let row = 0, col = 0, board = [], locked = false;

        function openSetup() {
            $('#secret', setup).value = '';
            $('#tries', setup).value = 6;
            statusEl.textContent = '';
            setup.showModal();
        }

        function initBoard() {
            grid.innerHTML = '';
            board = Array.from({ length: maxRows }, () => '');

            // Create rows based on maxRows (number of attempts)
            for (let r = 0; r < maxRows; r++) {
                const rowEl = document.createElement('div');
                rowEl.className = 'row';
                rowEl.setAttribute('role', 'row');
                rowEl.style.gridTemplateColumns = `repeat(${wordLen}, 1fr)`;

                // Create tiles based on wordLen (target word length)
                for (let c = 0; c < wordLen; c++) {
                    const t = document.createElement('div');
                    t.className = 'tile';
                    t.setAttribute('role', 'gridcell');
                    t.setAttribute('aria-label', `SatÄ±r ${r + 1}, SÃ¼tun ${c + 1}`);
                    rowEl.appendChild(t);
                }
                grid.appendChild(rowEl);
            }

            // Set responsive sizing based on actual container width
            requestAnimationFrame(updateTileSize);
            // Expose column count for CSS calculations
            grid.style.setProperty('--cols', String(wordLen));
        }

        function updateTileSize() {
            try {
                // On small screens, let CSS compute --tile-size for consistency
                if (window.innerWidth <= 600) return;
                const firstRow = grid.firstElementChild;
                if (!firstRow) return;
                const gridWidth = grid.clientWidth || 900;
                const styles = getComputedStyle(firstRow);
                const gap = parseFloat(styles.gap || '8') || 8;
                const cols = Math.max(1, wordLen);
                let size = Math.floor((gridWidth - (cols - 1) * gap) / cols);
                // Slight overall downscale on desktop for better layout density
                if (window.innerWidth >= 1024) {
                    size = Math.round(size * 0.8);
                }
                const clamped = Math.max(48, Math.min(84, size));
                grid.style.setProperty('--tile-size', `${clamped}px`);
            } catch (e) { /* noop */ }
        }

        function buildKeyboard() {
            kbd.innerHTML = '';

            // Ä°lk iki satÄ±rÄ± oluÅŸtur
            for (let i = 0; i < 2; i++) {
                const r = document.createElement('div');
                r.className = 'kbd-row';

                KBD_ROWS[i].forEach((k, colIndex) => {
                    const b = document.createElement('button');
                    b.type = 'button';

                    if (k === 'BACK') {
                        b.className = 'key large';
                        b.textContent = 'âŒ«';
                    } else {
                        b.className = 'key';
                        b.textContent = k;
                    }

                    b.dataset.key = k;
                    b.addEventListener('click', onKeyBtn);
                    r.appendChild(b);
                });
                kbd.appendChild(r);
            }

            // ÃœÃ§Ã¼ncÃ¼ satÄ±r - ENTER tuÅŸu iki satÄ±ra yayÄ±lacak
            const lastRow = document.createElement('div');
            lastRow.className = 'kbd-row';

            KBD_ROWS[2].forEach((k, colIndex) => {
                const b = document.createElement('button');
                b.type = 'button';

                if (k === 'ENTER') {
                    b.className = 'key enter';
                    b.textContent = 'ENTER';
                } else {
                    b.className = 'key';
                    b.textContent = k;
                }

                b.dataset.key = k;
                b.addEventListener('click', onKeyBtn);
                lastRow.appendChild(b);
            });
            kbd.appendChild(lastRow);
        }

        function curRowEl() { return grid.children[row]; }
        function drawRow() {
            const rowEl = curRowEl(); if (!rowEl) return;
            const letters = (board[row] || '').padEnd(wordLen, ' ').slice(0, wordLen).split('');
            [...rowEl.children].forEach((tile, i) => {
                tile.textContent = letters[i].trim() ? letters[i] : '';
                tile.classList.toggle('filled', !!letters[i].trim());
            });
        }

        function onKeyBtn(e) { onKey(e.currentTarget.dataset.key); }
        function onPhysical(e) {
            if (locked) return;
            // Oyun baÅŸlamamÄ±ÅŸsa (secret boÅŸsa) tuÅŸlarÄ± iÅŸleme
            if (!secret) return;
            // Mobil gizli input odaktayken global tuÅŸlarÄ± yoksay (Ã§ift giriÅŸ engeli)
            if (document.activeElement === mobileInput) return;
            const k = e.key;
            if (k === 'Enter') return onKey('ENTER');
            if (k === 'Backspace') return onKey('BACK');
            if (k.length === 1 && isLetter(k)) return onKey(toUp(k));
        }
        window.addEventListener('keydown', onPhysical);
        window.addEventListener('resize', () => requestAnimationFrame(updateTileSize));
        window.addEventListener('orientationchange', () => setTimeout(updateTileSize, 150));

        function onKey(k) {
            if (locked) return;
            // Oyun baÅŸlamamÄ±ÅŸsa (secret boÅŸsa) tuÅŸlarÄ± iÅŸleme
            if (!secret) return;
            if (k === 'ENTER') return submitRow();
            if (k === 'BACK') {
                if (col > 0) { board[row] = board[row].slice(0, -1); col--; drawRow(); }
                return;
            }
            if (isLetter(k) && col < wordLen) {
                board[row] = (board[row] || '') + k; col++; drawRow();
            }
        }

        function evaluate(guess, target) {
            const res = Array(wordLen).fill('absent');
            const t = target.split(''); const g = guess.split('');
            // greens
            for (let i = 0; i < wordLen; i++) {
                if (g[i] === t[i]) { res[i] = 'correct'; t[i] = null; g[i] = null; }
            }
            // counts
            const cnt = {};
            for (const ch of t) if (ch) cnt[ch] = (cnt[ch] || 0) + 1;
            // yellows
            for (let i = 0; i < wordLen; i++) {
                const ch = g[i]; if (!ch) continue;
                if (cnt[ch] > 0) { res[i] = 'present'; cnt[ch]--; }
            }
            return res;
        }

        function shadeKeyboard(guess, res) {
            const pri = { correct: 3, present: 2, absent: 1 }, best = {};
            for (let i = 0; i < guess.length; i++) {
                const ch = guess[i], st = res[i];
                best[ch] = (best[ch] && pri[best[ch]] > pri[st]) ? best[ch] : st;
            }
            $$('.key', kbd).forEach(b => {
                const k = b.dataset.key;
                if (!k || k === 'ENTER' || k === 'BACK') return;
                const st = best[k]; if (!st) return;
                b.classList.remove('correct', 'present', 'absent');
                b.classList.add(st);
            });
        }

        function revealRow(res) {
            const rowEl = curRowEl(); if (!rowEl) return;
            [...rowEl.children].forEach((tile, i) => {
                setTimeout(() => {
                    tile.classList.add('reveal');
                    tile.classList.remove('correct', 'present', 'absent');
                    tile.classList.add(res[i]);
                }, i * 180);
            });
        }

        function endGame(win) {
            locked = true;
            // AnimasyonlarÄ±n bitmesini bekle
            setTimeout(() => {
                if (win) {
                    $('#correct-word-win').textContent = secret;
                    congratsModal.showModal();
                } else {
                    $('#correct-word-lose').textContent = secret;
                    gameOverModal.showModal();
                }
            }, 800);
        }

        function submitRow() {
            if (col < wordLen) { statusEl.textContent = 'Eksik harf var.'; return; }
            const guess = board[row];
            const res = evaluate(guess, secret);
            revealRow(res); shadeKeyboard(guess, res);
            if (guess === secret) return endGame(true);
            row++; col = 0;
            if (row >= maxRows) return endGame(false);
            statusEl.textContent = `Kalan hak: ${maxRows - row}`;
        }

        function startGame(word, tries = 6) {
            secret = toUp(word);
            wordLen = secret.length;
            maxRows = Math.max(3, Math.min(10, parseInt(tries) || 6));
            row = 0; col = 0; locked = false;
            initBoard(); buildKeyboard(); drawRow();
            statusEl.textContent = `Kelime ${wordLen} harf â€” ${maxRows} hak`;
            // Oyun baÅŸladÄ±ÄŸÄ±nda yeniden baÅŸlat tuÅŸunu gizle
            restart.style.display = 'none';
            focusMobileInput();
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const inp = $('#secret', setup), tries = $('#tries', setup), err = $('.error', setup);
            err.textContent = '';
            const raw = toUp(inp.value.trim());
            if (!raw) { err.textContent = 'Kelime zorunlu.'; return; }
            if (!/^[A-ZÃ‡ÄžÄ°IÃ–ÅžÃœa-zÃ§ÄŸÄ±iÃ¶ÅŸÃ¼]+$/.test(raw)) { err.textContent = 'Sadece harf kullanÄ±n.'; return; }
            if (raw.length < 3 || raw.length > 10) { err.textContent = '3â€“10 harf olmalÄ±.'; return; }
            setup.close('ok'); startGame(raw, tries.value);
        });

        restart.addEventListener('click', () => {
            restart.style.display = 'none';
            openSetup();
        });

        // ilk aÃ§Ä±lÄ±ÅŸta kelime sor
        setTimeout(openSetup, 200);

        // ----- Mobile input handling -----
        const mobileInput = $('#mobile-input');
        function focusMobileInput() {
            if (!mobileInput) return;
            mobileInput.value = '';
            mobileInput.focus({ preventScroll: true });
            try { mobileInput.setSelectionRange(1, 1); } catch (_) { }
        }
        grid.addEventListener('click', () => { if (secret && !locked) focusMobileInput(); });
        kbd.addEventListener('click', () => { if (secret && !locked) focusMobileInput(); });
        if (mobileInput) {
            mobileInput.addEventListener('input', (e) => {
                e.stopPropagation();
                const v = e.target.value;
                if (!v) return;
                const ch = v.slice(-1);
                if (isLetter(ch)) onKey(toUp(ch));
                e.target.value = '';
            });
            mobileInput.addEventListener('keydown', (e) => {
                e.stopPropagation();
                if (e.key === 'Enter') { e.preventDefault(); onKey('ENTER'); return; }
                if (e.key === 'Backspace') { e.preventDefault(); onKey('BACK'); return; }
            });
        }
    </script>
</body>

</html>