<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>≈ûeker Oyunu</title>
    <link rel="icon" href="favicon-32x32.png" type="image/png">
    <link rel="stylesheet" href="style.css?v=5.0">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#005CB9">
<!-- mobilde ikon i√ßin -->
<link rel="apple-touch-icon" href="icons/icon-192.png">
</head>

<body>
    <div id="install-popup" class="hidden" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;">
  <div style="background:#fff;padding:20px;border-radius:10px;text-align:center;">
    <h2>üì≤ Uygulamayƒ± y√ºklemek ister misin?</h2>
    <button id="install-btn">Y√ºkle</button>
    <button id="later-btn">Daha Sonra</button>
  </div>
</div>



    <div id="game-container">

        <button id="settings-btn" class="settings-btn" title="Settings">
            <span id="settings-icon">‚öôÔ∏è</span>
        </button>

        <!--   Settings Panel -->
        <div id="settings-panel" class="settings-panel hidden">
            <div class="settings-content">
                <h3>Ayarlar</h3>

                <div class="setting-item">

                    <div class="volume-control">
                        <input type="range" id="volume-slider" min="0" max="100" value="40" class="slider">
                        <span id="volume-value">40%</span>
                    </div>
                </div>

                <div class="setting-item">

                    <button id="music-toggle" class="toggle-btn">üéµ A√á</button>
                </div>

                <div class="setting-item">

                    <button id="fullscreen-toggle" class="toggle-btn">‚õ∂ </button>
                </div>
            </div>
        </div>


        <!-- Start Screen -->
        <div id="start-screen" style="background-color: rgba(0, 0, 0,0);" class="screen">
            <div class="title">
                <h1><img src="img/tr_logo.webp" alt="Game Logo" id="game-logo"></h1>

            </div>
            <div class="game-start-container">
                <button id="start-game-btn" class="btn">Oyuna Ba≈üla</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen hidden">
            <div class="game-header">
                <div class="player-info">
                    <span id="player-display">Oyuncu: </span>
                </div>
                <div class="game-stats">
                    <div class="score-container">
                        <span>Puan: </span>
                        <span id="score">0</span>
                    </div>
                    <div class="timer-container">
                        <span>S√ºre: </span>
                        <span id="timer">30</span>
                    </div>

                </div>
            </div>
            <canvas id="game-canvas" width="670" height="960"></canvas> <!--GAME KANVAS -->
        </div>

        <!-- Score Popup -->
        <div id="score-popup" class="score-popup hidden">
            <div class="score-popup-content">
                <div class="score-popup-header">
                    <h2>üéâTEBRIKLER!üéâ</h2>
                </div>
                <div class="score-popup-body">
                    <div class="final-score-display">
                        <div class="score-label">Puanƒ±nƒ±z</div>
                        <div class="score-value" id="final-score-value">0</div>
                    </div>

                    <div class="player-name-display">
                        <span id="final-player-name">Oyuncu</span>
                    </div>
                </div>
                <div class="score-popup-footer">
                    <button id="play-again-btn-popup" class="btn">Tekrar Oyna</button>
                </div>
            </div>
        </div>


    </div>

    <script src="game.js"></script>
    <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => {
          console.log('SW registered.', reg);
        })
        .catch(err => console.log('SW registration failed: ', err));
    });
  } else {
    console.log('Service Worker desteklenmiyor.');
  }
</script>
<script>
    let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('install-popup').classList.remove('hidden');
});

document.getElementById('install-btn').addEventListener('click', async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    console.log('Kullanƒ±cƒ± se√ßimi:', outcome);
    deferredPrompt = null;
  }
});

document.getElementById('later-btn').addEventListener('click', () => {
  document.getElementById('install-popup').classList.add('hidden');
});

</script>


</body>

</html>