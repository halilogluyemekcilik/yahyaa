<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz UygulamasÄ±</title>
    <meta name="theme-color" content="#005CB9">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="img/Barikatlogo.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #003764 0%, #005CB9 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .container {
            max-width: 800px;
            width: 90%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .screen {
            text-align: center;
            display: none;
        }

        .screen.active {
            display: block;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #A1A8AD;
        }

        .logo {
            display: block;
            margin: 0 auto 1rem auto;
            max-width: 180px;
            width: 50%;
            height: auto;
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.35));
        }

        /* Ana container iÃ§in relative positioning */
        .container {
            position: relative;
        }

        /* Ayarlar ikonu */
        .settings-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .settings-icon:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .settings-icon.disabled {
            opacity: 0.35;
            pointer-events: none;
            filter: grayscale(40%);
        }

        /* Popup overlay */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .popup-overlay.active {
            display: flex;
        }

        /* Popup iÃ§eriÄŸi */
        .popup-content {
            background: linear-gradient(135deg, #003764 0%, #005CB9 100%);
            border-radius: 20px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .popup-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: white;
        }

        .popup-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .popup-option label {
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #4CAF50;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active::after {
            transform: translateX(30px);
        }

        .popup-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .start-btn,
        .option-btn,
        .next-btn,
        .restart-btn {
            background: linear-gradient(45deg, #005CB9, #003764);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
            box-shadow: 0 5px 15px rgba(0, 91, 185, 0.3);
        }

        /* Sonraki Soru dikkat animasyonu */
        .next-btn.attention {
            animation: nextPulse 0.8s ease-in-out infinite;
            box-shadow: 0 0 0 rgba(0, 91, 185, 0.6);
        }

        @keyframes nextPulse {
            0% {
                transform: translateX(-50%) scale(1);
                box-shadow: 0 0 0 0 rgba(0, 91, 185, 0.6);
            }

            50% {
                transform: translateX(-50%) scale(1.04);
                box-shadow: 0 0 20px 6px rgba(0, 91, 185, 0.45);
            }

            100% {
                transform: translateX(-50%) scale(1);
                box-shadow: 0 0 0 0 rgba(0, 91, 185, 0.6);
            }
        }

        .start-btn:hover,
        .next-btn:hover,
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 91, 185, 0.4);
        }

        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            margin: 0.8rem 0;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(161, 168, 173, 0.3);
        }

        .option-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #A1A8AD;
        }

        .option-btn.correct {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border-color: #4CAF50;
        }

        .option-btn.wrong {
            background: linear-gradient(45deg, #f44336, #da190b);
            border-color: #f44336;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .timer {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #A1A8AD;
            font-weight: bold;
        }

        .timer.warning {
            color: #ff6b6b;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }

            100% {
                opacity: 1;
            }
        }

        /* Kritik sÃ¼re iÃ§in daha hÄ±zlÄ± ve belirgin uyarÄ± */
        .timer.critical {
            color: #ff3b3b;
            animation: flash 0.4s steps(2, start) infinite;
            text-shadow: 0 0 10px rgba(255, 59, 59, 0.8);
        }

        @keyframes flash {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.2;
            }

            100% {
                opacity: 1;
            }
        }

        /* SÃ¼re azaldÄ±ÄŸÄ±nda soru alanÄ±nda hafif yanÄ±p sÃ¶nme efekti */
        .question.low-blink {
            animation: subtleBlink 1.5s ease-in-out infinite;
        }

        @keyframes subtleBlink {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.85;
            }

            100% {
                opacity: 1;
            }
        }

        .progress {
            background: rgba(255, 255, 255, 0.2);
            height: 10px;
            border-radius: 5px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(45deg, #A1A8AD, #005CB9);
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .question-container {
            margin: 2rem 0;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            color: white;
        }

        .score-display {
            font-size: 3rem;
            margin: 1rem 0;
            color: #A1A8AD;
            font-weight: bold;
        }

        .score-text {
            font-size: 1.2rem;
            margin: 1rem 0;
            color: white;
        }

        /* Son ekrandaki sÃ¼per kahraman adÄ± daha bÃ¼yÃ¼k ve belirgin */
        #score-hero {
            font-size: 2.4rem;
            font-weight: 700;
            margin: 0.5rem 0 0.75rem 0;
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
        }

        .loading {
            font-size: 1.2rem;
            color: #A1A8AD;
            margin: 2rem 0;
        }

        .error {
            color: #ff6b6b;
            font-size: 1.1rem;
            margin: 1rem 0;
        }

        /* Sonraki Soru butonunu ekranÄ±n en alt ortasÄ±nda konumlandÄ±r */
        #quiz-screen {
            position: relative;
            min-height: 60vh;
            padding-bottom: 4rem;
            /* buton iÃ§in alt boÅŸluk */
        }

        #next-btn {
            position: absolute;
            left: 50%;
            bottom: 1.5rem;
            transform: translateX(-50%);
        }

        @media (max-width: 600px) {
            .container {
                padding: 1rem;
                margin: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .option-btn {
                font-size: 1rem;
                padding: 0.8rem 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Global Logo (her ekranda gÃ¶ster) -->
        <img src="img/Barikatlogo.png" alt="Barikat Logo" class="logo" id="global-logo">

        <!-- Ayarlar Ä°konu -->
        <button class="settings-icon" id="settings-button" onclick="openSettings()" title="Ayarlar"
            style="display: none;">
            âš™ï¸
        </button>

        <!-- Ana Ekran -->
        <div class="screen active" id="home-screen">
            <h1>Siber GÃ¼venlik Bilgine GÃ¶re Hangi SÃ¼per KahramansÄ±n</h1>
            <p style="font-size: 1.2rem; margin: 2rem 0; color: #A1A8AD;">


            </p>
            <button class="start-btn" onclick="startQuiz()">Test Et</button>
        </div>

        <!-- Quiz EkranÄ± -->
        <div class="screen" id="quiz-screen">
            <div class="timer" id="timer">30</div>
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="question-container">
                <div class="question" id="question">Soru yÃ¼kleniyor...</div>
                <div id="options"></div>
            </div>

            <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                Sonraki Soru
            </button>
        </div>

        <!-- SonuÃ§ EkranÄ± -->
        <div class="screen" id="result-screen">
            <h2>ğŸŠ Test TamamlandÄ±!</h2>

            <!-- Puan -->
            <div class="score-display" id="final-score">0</div>

            <!-- Kahraman adÄ± ve ikonu -->
            <div class="score-hero" id="score-hero"></div>

            <!-- Kahraman mesajÄ± -->
            <div class="score-text" id="score-text"></div>

            <div style="margin: 2rem 0;">
                <div>DoÄŸru Cevaplar: <span id="correct-count">0</span>/5</div>
                <div>YanlÄ±ÅŸ Cevaplar: <span id="wrong-count">0</span>/5</div>
            </div>

            <button class="restart-btn" onclick="restartQuiz()">Tekrar Oyna</button>
        </div>

        <!-- YÃ¼kleme EkranÄ± -->
        <div class="screen" id="loading-screen">
            <div class="loading">Sorular yÃ¼kleniyor...</div>
        </div>
    </div>

    <!-- Ayarlar Popup -->
    <div class="popup-overlay" id="settings-popup">
        <div class="popup-content">
            <button class="popup-close" onclick="closeSettings()">Ã—</button>
            <h3 class="popup-title">âš™ï¸ Ayarlar</h3>

            <div class="popup-option">
                <label for="fullscreen-toggle">Tam Ekran</label>
                <div class="toggle-switch" id="fullscreen-toggle" onclick="toggleFullscreen()"></div>
            </div>
        </div>
    </div>

    <script>
        // Quiz verileri ve durumu
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let timer = 30;
        let timerInterval = null;
        let selectedQuestions = [];
        let postTimeUpTimeout = null;
        let resultAutoReturnTimeout = null;
        let nextBtnAttentionTimeout = null;

        function scheduleNextBtnAttention() {
            const nextBtn = document.getElementById('next-btn');
            // Temizle
            if (nextBtnAttentionTimeout) {
                clearTimeout(nextBtnAttentionTimeout);
                nextBtnAttentionTimeout = null;
            }
            nextBtn.classList.remove('attention');
            // 10 sn sonra dikkat animasyonu
            nextBtnAttentionTimeout = setTimeout(() => {
                nextBtn.classList.add('attention');
            }, 10000);
        }

        // Ã–rnek sorular (gerÃ§ek uygulamada dosyalardan okunacak)
        const sampleQuestions = [
            {
                question: "GÃ¼venlik duvarÄ±nÄ±n temel gÃ¶revi nedir?",
                options: [
                    "Gelen ve giden aÄŸ trafiÄŸini kontrol etmek",
                    "VirÃ¼s taramasÄ± yapmak",
                    "KullanÄ±cÄ± kimlik doÄŸrulamasÄ± yapmak",
                    "Yedekleme iÅŸlemlerini gerÃ§ekleÅŸtirmek"
                ],
                correct: 0
            },
            {
                question: "AntivirÃ¼s yazÄ±lÄ±mÄ± neyi engellemeyi amaÃ§lar?",
                options: [
                    "Spam e-postalarÄ±",
                    "ZararlÄ± yazÄ±lÄ±mlarÄ±",
                    "AÄŸ trafiÄŸini",
                    "Åifre kÄ±rmayÄ±"
                ],
                correct: 1
            },
            {
                question: "Oltalama saldÄ±rÄ±sÄ±nÄ±n amacÄ± nedir?",
                options: [
                    "Fiziksel saldÄ±rÄ± dÃ¼zenlemek",
                    "SunucularÄ± yeniden baÅŸlatmak",
                    "KullanÄ±cÄ±larÄ±n ÅŸifrelerini veya bilgilerini kandÄ±rarak elde etmek",
                    "Yedekleme dosyalarÄ±nÄ± silmek"
                ],
                correct: 2
            },
            {
                question: "Sanal Ã¶zel aÄŸ (VPN) ne saÄŸlar?",
                options: [
                    "Daha hÄ±zlÄ± internet baÄŸlantÄ±sÄ±",
                    "AntivirÃ¼s korumasÄ±",
                    "Yedekleme imkanÄ±",
                    "GÃ¼venli ve ÅŸifreli iletiÅŸim",
                ],
                correct: 3
            },
            {
                question: "En yaygÄ±n kullanÄ±lan kimlik doÄŸrulama yÃ¶ntemi hangisidir?",
                options: [
                    "Åifre",
                    "Parmak izi",
                    "AkÄ±llÄ± kart",
                    "Retina taramasÄ±"
                ],
                correct: 0
            },
            {
                question: "DDOS (Distributed Denial of Service) saldÄ±rÄ±sÄ±nÄ±n amacÄ± nedir?",
                options: [
                    "VeritabanÄ±nÄ± ÅŸifrelemek",
                    "Sistemi hizmet veremez hale getirmek",
                    "Verileri yedeklemek",
                    "Kimlik doÄŸrulama bypass etmek"
                ],
                correct: 1
            },
            {
                question: "â€œMalwareâ€ terimi neyi ifade eder?",
                options: [
                    "GÃ¼venlik duvarÄ±",
                    "Yedekleme programÄ±",
                    "ZararlÄ± yazÄ±lÄ±m",
                    "AÄŸ protokolÃ¼"
                ],
                correct: 2
            },
            {
                question: "HTTPS ile HTTP arasÄ±ndaki temel fark nedir?",
                options: [
                    "HTTPS daha hÄ±zlÄ±dÄ±r",
                    "HTTP daha gÃ¼venlidir",
                    "HTTPS yalnÄ±zca mobilde Ã§alÄ±ÅŸÄ±r",
                    "HTTPS ÅŸifreli iletiÅŸim saÄŸlar"
                ],
                correct: 3
            },
            {
                question: "â€œSosyal mÃ¼hendislikâ€ saldÄ±rÄ±larÄ± genelde neye dayanÄ±r?",
                options: [
                    "Ä°nsan zaaflarÄ±na",
                    "Teknik zafiyetlere",
                    "YazÄ±lÄ±m aÃ§Ä±klarÄ±na",
                    "DonanÄ±m hatalarÄ±na"
                ],
                correct: 0
            },
            {
                question: "Kaba kuvvet saldÄ±rÄ±sÄ± hangi amacÄ± taÅŸÄ±r?",
                options: [
                    "VeritabanÄ±nÄ± yedeklemek",
                    "Åifreleri deneme-yanÄ±lma yoluyla kÄ±rmak",
                    "Sistem kaynaklarÄ±nÄ± izlemek",
                    "TrafiÄŸi ÅŸifrelemek"
                ],
                correct: 1
            },
            {
                question: "SaldÄ±rÄ± tespit sistemi ne iÅŸe yarar?",
                options: [
                    "Sisteme saldÄ±rÄ± dÃ¼zenler",
                    "VeritabanÄ± yÃ¶netir",
                    "SaldÄ±rÄ±larÄ± tespit eder",
                    "SaldÄ±rÄ±larÄ± Ã¶nler"
                ],
                correct: 2
            },
            {
                question: "Siber gÃ¼venlikte â€œCIA Ã¼Ã§geniâ€ hangi kavramlardan oluÅŸur?",
                options: [
                    "GÃ¼venlik, iletiÅŸim, eriÅŸim",
                    "GÃ¼venlik, iletiÅŸim, antivirÃ¼s",
                    "Gizlilik, bilgi, deneyim",
                    "Gizlilik, bÃ¼tÃ¼nlÃ¼k, eriÅŸilebilirlik"
                ],
                correct: 3
            },
            {
                question: "SÄ±fÄ±rÄ±ncÄ± gÃ¼n aÃ§Ä±ÄŸÄ± nedir?",
                options: [
                    "HenÃ¼z Ã¼retici tarafÄ±ndan kapatÄ±lmamÄ±ÅŸ gÃ¼venlik aÃ§Ä±ÄŸÄ±",
                    "Sistem gÃ¼ncellemesi",
                    "VirÃ¼s taramasÄ±",
                    "DonanÄ±m arÄ±zasÄ±"
                ],
                correct: 0
            },
            {
                question: "Fidye zararlÄ± yazÄ±lÄ±m saldÄ±rÄ±sÄ± nedir?",
                options: [
                    "AÄŸ trafiÄŸinin hÄ±zlandÄ±rÄ±lmasÄ±",
                    "Verilerin Ã§alÄ±nÄ±p karÅŸÄ±lÄ±ÄŸÄ±nda maddi karÅŸÄ±lÄ±k istenmesi",
                    "Yedekleme yapÄ±lmasÄ±",
                    "Sistem gÃ¼ncellemesi"
                ],
                correct: 1
            },
            {
                question: "Ã‡ok faktÃ¶rlÃ¼ kimlik doÄŸrulama (MFA) ne saÄŸlar?",
                options: [
                    "Daha kolay giriÅŸ",
                    "Ä°nterneti hÄ±zlandÄ±rÄ±r",
                    "Birden fazla doÄŸrulama yÃ¶ntemiyle gÃ¼venliÄŸi artÄ±rÄ±r",
                    "Parola yÃ¶netimini kaldÄ±rÄ±r"
                ],
                correct: 2
            },
            {
                question: "Siber gÃ¼venlikte yama (patch) ne anlama gelir?",
                options: [
                    "GÃ¼venlik gÃ¼ncellemesi",
                    "Yedekleme dosyasÄ±",
                    "DonanÄ±m yÃ¼kseltmesi",
                    "AntivirÃ¼s taramasÄ±"
                ],
                correct: 0
            },
            {
                question: "â€œOrtadaki adamâ€ saldÄ±rÄ±sÄ± nedir?",
                options: [
                    "Åifre kÄ±rma denemesi yapmak",
                    "Ä°ki sistem arasÄ±ndaki iletiÅŸimi gizlice dinlemek",
                    "VeritabanÄ±nÄ± silmek",
                    "AntivirÃ¼s yÃ¼klemek"
                ],
                correct: 1
            },
            {
                question: "GÃ¼venlik bilgi ve olay yÃ¶netim sisteminin (SIEM) gÃ¶revi nedir?",
                options: [
                    "E-postalarÄ± depolamak",
                    "Yedekleme yapmak",
                    "GÃ¼venlik olaylarÄ±nÄ± toplamak ve analiz etmek",
                    "AÄŸ trafiÄŸini hÄ±zlandÄ±rmak"
                ],
                correct: 2
            },
            {
                question: "En sÄ±k kullanÄ±lan saldÄ±rÄ± tÃ¼rlerinden â€œSQL Injectionâ€ hangi katmanda gerÃ§ekleÅŸir?",
                options: [
                    "Fiziksel katman",
                    "AÄŸ katmanÄ±",
                    "DonanÄ±m katmanÄ±",
                    "Uygulama katmanÄ±"
                ],
                correct: 3
            },
            {
                question: "GÃ¼venlik operasyon merkezi nedir?",
                options: [
                    "GÃ¼venlik operasyonlarÄ±nÄ± izleyen ve yÃ¶neten merkez",
                    "YazÄ±lÄ±m geliÅŸtirme ekibi",
                    "Veri depolama alanÄ±",
                    "Firewall cihazÄ±"
                ],
                correct: 0
            },
            {
                question: "\"Phishing\" nedir?",
                options: [
                    "Bir tÃ¼r antivirÃ¼s yazÄ±lÄ±mÄ±",
                    "Sahte e-postalar veya mesajlarla kullanÄ±cÄ± bilgilerini Ã§almaya Ã§alÄ±ÅŸma",
                    "Counter Strike oyununda bir haritadÄ±r.",
                    "Ä°nternette gÃ¼venli gezinmek iÃ§in kullanÄ±lan mobil uygulamadÄ±r."
                ],
                correct: 1
            },
            {
                question: "AÅŸaÄŸÄ±dakilerden hangisi GÃ¼Ã§lÃ¼ bir ÅŸifredir?",
                options: [
                    "Ad-Soyad birleÅŸimi",
                    "DoÄŸum Tarihi",
                    "KÃ¼Ã§Ã¼k bÃ¼yÃ¼k harf, rakam ve sembol kombinasyonlarÄ±ndan oluÅŸan en az 10 karakter",
                    "Ã‡ocuklarÄ±n veya evcil hayvanÄ±n ismi"

                ],
                correct: 3
            },
            {
                question: "AÅŸaÄŸÄ±dakilerden hangisi bir firewall iÅŸlevidir?",
                options: [
                    "Yetkisiz aÄŸ trafiÄŸini engellemek",
                    "Bilgisayarda ÅŸifre girmeyi saÄŸlamak",
                    "YangÄ±n sÃ¶ndÃ¼rmek iÃ§in kullanmak",
                    "Wifi Ã§ekim kapasitesini artÄ±rmak"
                ],
                correct: 0
            },
            {
                question: "Bir \"DDoS\" saldÄ±rÄ±sÄ± neyi hedefler?",
                options: [
                    "KullanÄ±cÄ± ÅŸifrelerini Ã§almak",
                    "Bir sunucuyu aÅŸÄ±rÄ± yÃ¼kleyerek hizmet dÄ±ÅŸÄ± bÄ±rakmak",
                    "Bilgisayar donanÄ±mÄ±nÄ± fiziksel olarak bozmak",
                    "Kredi KartÄ± bilgilerini ele geÃ§irmek"
                ],
                correct: 1
            },
            {
                question: "AÅŸaÄŸÄ±dakilerden hangisi Barikatâ€™Ä±n servislerinden birisidir?",
                options: [
                    "Bilgisayar donanÄ±mÄ± Ã¼retmek",
                    "Ã‡aÄŸrÄ± merkezi hizmeti vermek",
                    "AÄŸlarÄ± ve sistemleri gÃ¼venlik tehditlerine karÅŸÄ± korumak",
                    "Web siteleri tasarlamak"
                ],
                correct: 2
            }
        ];

        // Dosyalardan sorularÄ± yÃ¼kleme fonksiyonu
        async function loadQuestions() {
            questions = [];
            let successCount = 0;

            for (let i = 1; i <= 25; i++) {
                try {
                    const response = await fetch(`sorular/soru${i}.txt`);
                    if (response.ok) {
                        const content = await response.text();
                        const lines = content.trim().split('\n');

                        if (lines.length >= 6) {
                            const question = {
                                question: lines[0],
                                options: [lines[1], lines[2], lines[3], lines[4]],
                                correct: parseInt(lines[5])
                            };
                            questions.push(question);
                            successCount++;
                        }
                    }
                } catch (error) {
                    console.log(`soru${i}.txt okunamadÄ±:`, error.message);
                }
            }

            if (successCount < 5) {
                console.log(`Sadece ${successCount} soru yÃ¼klendi. Ã–rnek sorular kullanÄ±lÄ±yor.`);
                questions = [...sampleQuestions];
                return true;
            }

            console.log(`${successCount} soru baÅŸarÄ±yla yÃ¼klendi.`);
            return true;
        }

        // Rastgele 5 soru seÃ§me
        function selectRandomQuestions() {
            const shuffled = [...questions].sort(() => 0.5 - Math.random());
            selectedQuestions = shuffled.slice(0, 5);
        }

        // Quiz baÅŸlatma
        async function startQuiz() {
            // SonuÃ§ ekranÄ± geri dÃ¶nÃ¼ÅŸ zamanlayÄ±cÄ±sÄ±nÄ± temizle
            if (resultAutoReturnTimeout) {
                clearTimeout(resultAutoReturnTimeout);
                resultAutoReturnTimeout = null;
            }
            showScreen('loading-screen');

            const loaded = await loadQuestions();
            if (!loaded) {
                showError('Sorular yÃ¼klenemedi!');
                return;
            }

            selectRandomQuestions();
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;

            showScreen('quiz-screen');
            displayQuestion();
            startTimer();
        }

        // Ekran deÄŸiÅŸtirme
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // Hata gÃ¶sterme
        function showError(message) {
            showScreen('home-screen');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            document.querySelector('#home-screen').appendChild(errorDiv);
        }

        // Soruyu gÃ¶sterme
        function displayQuestion() {
            const question = selectedQuestions[currentQuestionIndex];
            document.getElementById('question').textContent = question.question;

            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                button.onclick = () => selectOption(index);
                optionsDiv.appendChild(button);
            });

            // Progress bar gÃ¼ncelleme
            const progress = ((currentQuestionIndex) / 5) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';

            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('next-btn').classList.remove('attention');
            if (nextBtnAttentionTimeout) {
                clearTimeout(nextBtnAttentionTimeout);
                nextBtnAttentionTimeout = null;
            }
            resetTimer();
        }

        // SeÃ§enek seÃ§me
        function selectOption(selectedIndex) {
            const question = selectedQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('.option-btn');

            // Timer'Ä± durdur
            clearInterval(timerInterval);

            // Var olan otomatik geÃ§iÅŸ zamanlayÄ±cÄ±sÄ±nÄ± temizle
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }

            // TÃ¼m seÃ§enekleri deaktif et
            options.forEach(option => option.classList.add('disabled'));

            // DoÄŸru ve yanlÄ±ÅŸ cevaplarÄ± gÃ¶ster
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('wrong');
                }
            });

            // Puan hesaplama
            if (selectedIndex === question.correct) {
                score += 20;
                correctAnswers++;
            }

            // Sonraki soru butonu gÃ¶ster
            document.getElementById('next-btn').style.display = 'block';
            scheduleNextBtnAttention();

            // 30 saniye iÃ§inde geÃ§ilmezse otomatik olarak sonraki soruya geÃ§
            postTimeUpTimeout = setTimeout(() => {
                nextQuestion();
            }, 30000);
        }

        // Timer baÅŸlatma
        function startTimer() {
            timer = 30;
            updateTimerDisplay();

            timerInterval = setInterval(() => {
                timer--;
                updateTimerDisplay();

                if (timer <= 10) {
                    document.getElementById('timer').classList.add('warning');
                    document.getElementById('question').classList.add('low-blink');
                }

                if (timer <= 5) {
                    document.getElementById('timer').classList.add('critical');
                }

                if (timer <= 0) {
                    clearInterval(timerInterval);
                    timeUp();
                }
            }, 1000);
        }

        // Timer sÄ±fÄ±rlama
        function resetTimer() {
            timer = 30;
            document.getElementById('timer').classList.remove('warning');
            document.getElementById('timer').classList.remove('critical');
            document.getElementById('question').classList.remove('low-blink');
            updateTimerDisplay();
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }
        }

        // Timer gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ gÃ¼ncelleme
        function updateTimerDisplay() {
            document.getElementById('timer').textContent = `â±ï¸ ${timer}s`;
        }

        // SÃ¼re bittiÄŸinde
        function timeUp() {
            const options = document.querySelectorAll('.option-btn');
            const question = selectedQuestions[currentQuestionIndex];

            // TÃ¼m seÃ§enekleri deaktif et
            options.forEach(option => option.classList.add('disabled'));

            // DoÄŸru cevabÄ± gÃ¶ster
            options[question.correct].classList.add('correct');

            // Sonraki soru butonu gÃ¶ster
            document.getElementById('next-btn').style.display = 'block';
            scheduleNextBtnAttention();

            // Timer metnini gÃ¼ncelle
            const timerDiv = document.getElementById('timer');
            timerDiv.textContent = 'â±ï¸ SÃ¼re bitti';

            // 30 saniye sonra otomatik sonraki soruya geÃ§
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
            }
            postTimeUpTimeout = setTimeout(() => {
                nextQuestion();
            }, 30000);
        }

        // Sonraki soruya geÃ§me
        function nextQuestion() {
            // Otomatik geÃ§iÅŸ zamanlayÄ±cÄ±sÄ±nÄ± temizle
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }
            if (nextBtnAttentionTimeout) {
                clearTimeout(nextBtnAttentionTimeout);
                nextBtnAttentionTimeout = null;
            }
            document.getElementById('next-btn').classList.remove('attention');
            currentQuestionIndex++;

            if (currentQuestionIndex >= 5) {
                showResults();
            } else {
                displayQuestion();
                startTimer();
            }
        }

        function showResults() {
            clearInterval(timerInterval);
            showScreen('result-screen');

            // SonuÃ§ bilgileri
            document.getElementById('final-score').textContent = score + ' Puan';
            document.getElementById('correct-count').textContent = correctAnswers;
            document.getElementById('wrong-count').textContent = 5 - correctAnswers;

            // Kahraman ve mesaj
            let hero = '';
            let message = '';

            if (score >= 100) {
                hero = 'ğŸ¦¾ Iron Man';
                message = 'Demir bir zÄ±rh gibi korunuyorsun, teknoloji ve siber gÃ¼venlik senin iÅŸin!';
            } else if (score >= 80) {
                hero = 'ğŸ¦‡ Batman';
                message = 'Geceyi gÃ¶zetleyen bir dedektif gibi gizlilik ve zekÃ¢nla parlÄ±yorsun!';
            } else if (score >= 60) {
                hero = 'ğŸ•·ï¸ Spider-Man';
                message = 'AÄŸlarÄ±nÄ± saÄŸlam Ã¶rÃ¼yorsun, baÄŸlantÄ±larÄ±nÄ± Ã§ok iyi kurmuÅŸsun!';
            } else if (score >= 40) {
                hero = 'ğŸ¦¸ Superman';
                message = 'UÃ§abiliyorsun ama biraz daha hÄ±z kazanabilirsin!';
            } else if (score >= 20) {
                hero = 'âš¡ Thor';
                message = 'ÅimÅŸek gibi enerjiksin ama Ã§ekicini biraz daha ustaca kullanmalÄ±sÄ±n!';
            } else {
                hero = 'âš¡ Thor';
                message = 'ğŸ’ª Bir Thor kadar gÃ¼Ã§lÃ¼sÃ¼n ama biraz daha Ã§alÄ±ÅŸmalÄ±sÄ±n!';
            }

            // HTML tarafÄ±nda <span id="score-hero"></span> ve <span id="score-text"></span> olmasÄ± gerekiyor
            document.getElementById('score-hero').textContent = hero;
            document.getElementById('score-text').textContent = message;

            // 60 saniye iÃ§inde tekrar oyna tÄ±klanmazsa ana ekrana dÃ¶n
            if (resultAutoReturnTimeout) {
                clearTimeout(resultAutoReturnTimeout);
            }
            resultAutoReturnTimeout = setTimeout(() => {
                restartQuiz();
            }, 60000);
        }


        // Quiz'i yeniden baÅŸlatma
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            clearInterval(timerInterval);
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }
            if (resultAutoReturnTimeout) {
                clearTimeout(resultAutoReturnTimeout);
                resultAutoReturnTimeout = null;
            }
            showScreen('home-screen');
        }

        // Ayarlar popup fonksiyonlarÄ±
        function openSettings() {
            document.getElementById('settings-popup').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settings-popup').classList.remove('active');
        }

        // Tam ekran fonksiyonlarÄ±
        function toggleFullscreen() {
            const toggle = document.getElementById('fullscreen-toggle');

            if (!document.fullscreenElement) {
                // Tam ekrana geÃ§
                document.documentElement.requestFullscreen().then(() => {
                    toggle.classList.add('active');
                }).catch(err => {
                    console.log('Tam ekran hatasÄ±:', err);
                });
            } else {
                // Tam ekrandan Ã§Ä±k
                document.exitFullscreen().then(() => {
                    toggle.classList.remove('active');
                }).catch(err => {
                    console.log('Tam ekran Ã§Ä±kÄ±ÅŸ hatasÄ±:', err);
                });
            }
        }

        // Tam ekran durumu deÄŸiÅŸikliÄŸini dinle
        document.addEventListener('fullscreenchange', function () {
            const toggle = document.getElementById('fullscreen-toggle');
            if (document.fullscreenElement) {
                toggle.classList.add('active');
            } else {
                toggle.classList.remove('active');
            }
        });

        // Popup dÄ±ÅŸÄ±na tÄ±klandÄ±ÄŸÄ±nda kapat
        document.getElementById('settings-popup').addEventListener('click', function (e) {
            if (e.target === this) {
                closeSettings();
            }
        });

        // Ayarlar ikonu etkin/pasif
        function applySettingsIconState(enabled) {
            const btn = document.getElementById('settings-button');
            if (!btn) return;
            if (enabled) {
                btn.classList.remove('disabled');
            } else {
                btn.classList.add('disabled');
            }
        }

        // Ayarlar ikonunun gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ (gÃ¶ster/gizle)
        function applySettingsIconVisibility(visible) {
            const btn = document.getElementById('settings-button');
            if (!btn) return;
            btn.style.display = visible ? '' : 'none';
        }

        // Sayfa yÃ¼klendiÄŸinde
        window.addEventListener('load', function () {
            // Ayarlar ikonu durumunu yÃ¼kle (pasif/aktif)
            const stored = localStorage.getItem('settingsIconEnabled');
            const enabled = stored === null ? true : stored === 'true';
            applySettingsIconState(enabled);

            // GÃ¶rÃ¼nÃ¼rlÃ¼k durumunu yÃ¼kle (logo ile toggle edilecek)
            const visStored = localStorage.getItem('settingsIconVisible');
            const visible = visStored === null ? false : visStored === 'true';
            applySettingsIconVisibility(visible);

            // KÄ±sayol: S tuÅŸu ile ayarlarÄ± aÃ§
            document.addEventListener('keydown', function (e) {
                if ((e.key === 's' || e.key === 'S')) {
                    openSettings();
                }
            });

            // Logo gizli buton: ayarlar ikonunu aktif/pasif yap
            const logo = document.getElementById('global-logo');
            if (logo) {
                logo.style.cursor = 'pointer';
                logo.addEventListener('click', function () {
                    // GÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ toggle et
                    const visStoredNow = localStorage.getItem('settingsIconVisible');
                    const visibleNow = visStoredNow === null ? false : visStoredNow === 'true';
                    const nextVisible = !visibleNow;
                    localStorage.setItem('settingsIconVisible', String(nextVisible));
                    applySettingsIconVisibility(nextVisible);
                });
            }

            // Service Worker kaydÄ± (PWA iÃ§in)
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js').catch(err => {
                    console.log('Service worker kayÄ±t hatasÄ±:', err);
                });
            }
        });
    </script>
</body>

</html>