<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Uygulamasƒ±</title>
    <meta name="theme-color" content="#005CB9">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="img/BarikatLogo.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #003764 0%, #005CB9 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .container {
            max-width: 800px;
            width: 90%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .screen {
            text-align: center;
            display: none;
        }

        .screen.active {
            display: block;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #A1A8AD;
        }

        .logo {
            display: block;
            margin: 0 auto 1rem auto;
            max-width: 180px;
            width: 50%;
            height: auto;
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.35));
        }

        /* Ana container i√ßin relative positioning */
        .container {
            position: relative;
        }

        /* Ayarlar ikonu */
        .settings-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .settings-icon:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .settings-icon.disabled {
            opacity: 0.35;
            pointer-events: none;
            filter: grayscale(40%);
        }

        /* Popup overlay */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .popup-overlay.active {
            display: flex;
        }

        /* Popup i√ßeriƒüi */
        .popup-content {
            background: linear-gradient(135deg, #003764 0%, #005CB9 100%);
            border-radius: 20px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .popup-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: white;
        }

        .popup-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .popup-option label {
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #4CAF50;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active::after {
            transform: translateX(30px);
        }

        .popup-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .start-btn,
        .option-btn,
        .next-btn,
        .restart-btn {
            background: linear-gradient(45deg, #005CB9, #003764);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
            box-shadow: 0 5px 15px rgba(0, 91, 185, 0.3);
        }

        /* Sonraki Soru dikkat animasyonu */
        .next-btn.attention {
            animation: nextPulse 0.8s ease-in-out infinite;
            box-shadow: 0 0 0 rgba(0, 91, 185, 0.6);
        }

        @keyframes nextPulse {
            0% {
                transform: translateX(-50%) scale(1);
                box-shadow: 0 0 0 0 rgba(0, 91, 185, 0.6);
            }

            50% {
                transform: translateX(-50%) scale(1.04);
                box-shadow: 0 0 20px 6px rgba(0, 91, 185, 0.45);
            }

            100% {
                transform: translateX(-50%) scale(1);
                box-shadow: 0 0 0 0 rgba(0, 91, 185, 0.6);
            }
        }

        .start-btn:hover,
        .next-btn:hover,
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 91, 185, 0.4);
        }

        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            margin: 0.8rem 0;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(161, 168, 173, 0.3);
        }

        .option-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #A1A8AD;
        }

        .option-btn.correct {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border-color: #4CAF50;
        }

        .option-btn.wrong {
            background: linear-gradient(45deg, #f44336, #da190b);
            border-color: #f44336;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .timer {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #A1A8AD;
            font-weight: bold;
        }

        .timer.warning {
            color: #ff6b6b;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }

            100% {
                opacity: 1;
            }
        }

        /* Kritik s√ºre i√ßin daha hƒ±zlƒ± ve belirgin uyarƒ± */
        .timer.critical {
            color: #ff3b3b;
            animation: flash 0.4s steps(2, start) infinite;
            text-shadow: 0 0 10px rgba(255, 59, 59, 0.8);
        }

        @keyframes flash {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.2;
            }

            100% {
                opacity: 1;
            }
        }

        /* S√ºre azaldƒ±ƒüƒ±nda soru alanƒ±nda hafif yanƒ±p s√∂nme efekti */
        .question.low-blink {
            animation: subtleBlink 1.5s ease-in-out infinite;
        }

        @keyframes subtleBlink {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.85;
            }

            100% {
                opacity: 1;
            }
        }

        .progress {
            background: rgba(255, 255, 255, 0.2);
            height: 10px;
            border-radius: 5px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(45deg, #A1A8AD, #005CB9);
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .question-container {
            margin: 2rem 0;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            color: white;
        }

        .score-display {
            font-size: 3rem;
            margin: 1rem 0;
            color: #A1A8AD;
            font-weight: bold;
        }

        .score-text {
            font-size: 1.2rem;
            margin: 1rem 0;
            color: white;
        }

        /* Son ekrandaki s√ºper kahraman adƒ± daha b√ºy√ºk ve belirgin */
        #score-hero {
            font-size: 2.4rem;
            font-weight: 700;
            margin: 0.5rem 0 0.75rem 0;
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
        }

        .loading {
            font-size: 1.2rem;
            color: #A1A8AD;
            margin: 2rem 0;
        }

        .error {
            color: #ff6b6b;
            font-size: 1.1rem;
            margin: 1rem 0;
        }

        /* Sonraki Soru butonunu ekranƒ±n en alt ortasƒ±nda konumlandƒ±r */
        #quiz-screen {
            position: relative;
            min-height: 60vh;
            padding-bottom: 4rem;
            /* buton i√ßin alt bo≈üluk */
        }

        #next-btn {
            position: absolute;
            left: 50%;
            bottom: 1.5rem;
            transform: translateX(-50%);
        }

        @media (max-width: 600px) {
            .container {
                padding: 1rem;
                margin: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .option-btn {
                font-size: 1rem;
                padding: 0.8rem 1rem;
            }
        }

        /* PWA Y√ºkleme Bannerƒ± */
        .install-banner {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 3000;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(6px);
            padding: 0.75rem;
        }

        .install-banner .install-content {
            max-width: 800px;
            margin: 0 auto;
            background: linear-gradient(135deg, #003764 0%, #005CB9 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 14px;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        }

        .install-banner .install-text {
            color: #fff;
            font-size: 1rem;
        }

        .install-banner .install-actions {
            display: flex;
            gap: 0.5rem;
        }

        .install-btn,
        .install-dismiss-btn {
            border: none;
            border-radius: 10px;
            padding: 0.6rem 1rem;
            font-size: 0.95rem;
            cursor: pointer;
        }

        .install-btn {
            background: linear-gradient(45deg, #005CB9, #003764);
            color: #fff;
            box-shadow: 0 5px 15px rgba(0, 91, 185, 0.3);
        }

        .install-btn:hover {
            transform: translateY(-1px);
        }

        .install-dismiss-btn {
            background: rgba(255, 255, 255, 0.85);
            color: #003764;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Global Logo (her ekranda g√∂ster) -->
        <img src="img/BarikatLogo.png" alt="Barikat Logo" class="logo" id="global-logo">

        <!-- Ayarlar ƒ∞konu -->
        <button class="settings-icon" id="settings-button" onclick="openSettings()" title="Ayarlar"
            style="display: none;">
            ‚öôÔ∏è
        </button>

        <!-- Ana Ekran -->
        <div class="screen active" id="home-screen">
            <h1>Siber G√ºvenlik Bilgine G√∂re Hangi S√ºper Kahramansƒ±n</h1>
            <p style="font-size: 1.2rem; margin: 2rem 0; color: #A1A8AD;">


            </p>
            <button class="start-btn" onclick="startQuiz()">Test Et</button>
        </div>

        <!-- Quiz Ekranƒ± -->
        <div class="screen" id="quiz-screen">
            <div class="timer" id="timer">30</div>
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="question-container">
                <div class="question" id="question">Soru y√ºkleniyor...</div>
                <div id="options"></div>
            </div>

            <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                Sonraki Soru
            </button>
        </div>

        <!-- Sonu√ß Ekranƒ± -->
        <div class="screen" id="result-screen">
            <h2>üéä Test Tamamlandƒ±!</h2>

            <!-- Puan -->
            <div class="score-display" id="final-score">0</div>

            <!-- Kahraman adƒ± ve ikonu -->
            <div class="score-hero" id="score-hero"></div>

            <!-- Kahraman mesajƒ± -->
            <div class="score-text" id="score-text"></div>

            <div style="margin: 2rem 0;">
                <div>Doƒüru Cevaplar: <span id="correct-count">0</span>/5</div>
                <div>Yanlƒ±≈ü Cevaplar: <span id="wrong-count">0</span>/5</div>
            </div>

            <button class="restart-btn" onclick="restartQuiz()">Tekrar Oyna</button>
        </div>

        <!-- Y√ºkleme Ekranƒ± -->
        <div class="screen" id="loading-screen">
            <div class="loading">Sorular y√ºkleniyor...</div>
        </div>
    </div>

    <!-- PWA Y√ºkleme Bannerƒ± -->
    <div class="install-banner" id="install-banner" style="display: none;">
        <div class="install-content">
            <div class="install-text">Uygulamayƒ± cihazƒ±nƒ±za y√ºklemek ister misiniz?</div>
            <div class="install-actions">
                <button class="install-dismiss-btn" id="install-dismiss">Daha sonra</button>
                <button class="install-btn" id="install-cta">Y√ºkle</button>
            </div>
        </div>
    </div>

    <!-- Ayarlar Popup -->
    <div class="popup-overlay" id="settings-popup">
        <div class="popup-content">
            <button class="popup-close" onclick="closeSettings()">√ó</button>
            <h3 class="popup-title">‚öôÔ∏è Ayarlar</h3>

            <div class="popup-option">
                <label for="fullscreen-toggle">Tam Ekran</label>
                <div class="toggle-switch" id="fullscreen-toggle" onclick="toggleFullscreen()"></div>
            </div>
        </div>
    </div>

    <script>
        // Quiz verileri ve durumu
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let timer = 30;
        let timerInterval = null;
        let selectedQuestions = [];
        let postTimeUpTimeout = null;
        let resultAutoReturnTimeout = null;
        let nextBtnAttentionTimeout = null;

        function scheduleNextBtnAttention() {
            const nextBtn = document.getElementById('next-btn');
            // Temizle
            if (nextBtnAttentionTimeout) {
                clearTimeout(nextBtnAttentionTimeout);
                nextBtnAttentionTimeout = null;
            }
            nextBtn.classList.remove('attention');
            // 10 sn sonra dikkat animasyonu
            nextBtnAttentionTimeout = setTimeout(() => {
                nextBtn.classList.add('attention');
            }, 10000);
        }

        // √ñrnek sorular (ger√ßek uygulamada dosyalardan okunacak)
        const sampleQuestions = [
            {
                question: "G√ºvenlik duvarƒ±nƒ±n temel g√∂revi nedir?",
                options: [
                    "Gelen ve giden aƒü trafiƒüini kontrol etmek",
                    "Vir√ºs taramasƒ± yapmak",
                    "Kullanƒ±cƒ± kimlik doƒürulamasƒ± yapmak",
                    "Yedekleme i≈ülemlerini ger√ßekle≈ütirmek"
                ],
                correct: 0
            },
            {
                question: "Antivir√ºs yazƒ±lƒ±mƒ± neyi engellemeyi ama√ßlar?",
                options: [
                    "Spam e-postalarƒ±",
                    "Zararlƒ± yazƒ±lƒ±mlarƒ±",
                    "Aƒü trafiƒüini",
                    "≈ûifre kƒ±rmayƒ±"
                ],
                correct: 1
            },
            {
                question: "Oltalama saldƒ±rƒ±sƒ±nƒ±n amacƒ± nedir?",
                options: [
                    "Fiziksel saldƒ±rƒ± d√ºzenlemek",
                    "Sunucularƒ± yeniden ba≈ülatmak",
                    "Kullanƒ±cƒ±larƒ±n ≈üifrelerini veya bilgilerini kandƒ±rarak elde etmek",
                    "Yedekleme dosyalarƒ±nƒ± silmek"
                ],
                correct: 2
            },
            {
                question: "Sanal √∂zel aƒü (VPN) ne saƒülar?",
                options: [
                    "Daha hƒ±zlƒ± internet baƒülantƒ±sƒ±",
                    "Antivir√ºs korumasƒ±",
                    "Yedekleme imkanƒ±",
                    "G√ºvenli ve ≈üifreli ileti≈üim",
                ],
                correct: 3
            },
            {
                question: "En yaygƒ±n kullanƒ±lan kimlik doƒürulama y√∂ntemi hangisidir?",
                options: [
                    "≈ûifre",
                    "Parmak izi",
                    "Akƒ±llƒ± kart",
                    "Retina taramasƒ±"
                ],
                correct: 0
            },
            {
                question: "DDOS (Distributed Denial of Service) saldƒ±rƒ±sƒ±nƒ±n amacƒ± nedir?",
                options: [
                    "Veritabanƒ±nƒ± ≈üifrelemek",
                    "Sistemi hizmet veremez hale getirmek",
                    "Verileri yedeklemek",
                    "Kimlik doƒürulama bypass etmek"
                ],
                correct: 1
            },
            {
                question: "‚ÄúMalware‚Äù terimi neyi ifade eder?",
                options: [
                    "G√ºvenlik duvarƒ±",
                    "Yedekleme programƒ±",
                    "Zararlƒ± yazƒ±lƒ±m",
                    "Aƒü protokol√º"
                ],
                correct: 2
            },
            {
                question: "HTTPS ile HTTP arasƒ±ndaki temel fark nedir?",
                options: [
                    "HTTPS daha hƒ±zlƒ±dƒ±r",
                    "HTTP daha g√ºvenlidir",
                    "HTTPS yalnƒ±zca mobilde √ßalƒ±≈üƒ±r",
                    "HTTPS ≈üifreli ileti≈üim saƒülar"
                ],
                correct: 3
            },
            {
                question: "‚ÄúSosyal m√ºhendislik‚Äù saldƒ±rƒ±larƒ± genelde neye dayanƒ±r?",
                options: [
                    "ƒ∞nsan zaaflarƒ±na",
                    "Teknik zafiyetlere",
                    "Yazƒ±lƒ±m a√ßƒ±klarƒ±na",
                    "Donanƒ±m hatalarƒ±na"
                ],
                correct: 0
            },
            {
                question: "Kaba kuvvet saldƒ±rƒ±sƒ± hangi amacƒ± ta≈üƒ±r?",
                options: [
                    "Veritabanƒ±nƒ± yedeklemek",
                    "≈ûifreleri deneme-yanƒ±lma yoluyla kƒ±rmak",
                    "Sistem kaynaklarƒ±nƒ± izlemek",
                    "Trafiƒüi ≈üifrelemek"
                ],
                correct: 1
            },
            {
                question: "Saldƒ±rƒ± tespit sistemi ne i≈üe yarar?",
                options: [
                    "Sisteme saldƒ±rƒ± d√ºzenler",
                    "Veritabanƒ± y√∂netir",
                    "Saldƒ±rƒ±larƒ± tespit eder",
                    "Saldƒ±rƒ±larƒ± √∂nler"
                ],
                correct: 2
            },
            {
                question: "Siber g√ºvenlikte ‚ÄúCIA √º√ßgeni‚Äù hangi kavramlardan olu≈üur?",
                options: [
                    "G√ºvenlik, ileti≈üim, eri≈üim",
                    "G√ºvenlik, ileti≈üim, antivir√ºs",
                    "Gizlilik, bilgi, deneyim",
                    "Gizlilik, b√ºt√ºnl√ºk, eri≈üilebilirlik"
                ],
                correct: 3
            },
            {
                question: "Sƒ±fƒ±rƒ±ncƒ± g√ºn a√ßƒ±ƒüƒ± nedir?",
                options: [
                    "Hen√ºz √ºretici tarafƒ±ndan kapatƒ±lmamƒ±≈ü g√ºvenlik a√ßƒ±ƒüƒ±",
                    "Sistem g√ºncellemesi",
                    "Vir√ºs taramasƒ±",
                    "Donanƒ±m arƒ±zasƒ±"
                ],
                correct: 0
            },
            {
                question: "Fidye zararlƒ± yazƒ±lƒ±m saldƒ±rƒ±sƒ± nedir?",
                options: [
                    "Aƒü trafiƒüinin hƒ±zlandƒ±rƒ±lmasƒ±",
                    "Verilerin √ßalƒ±nƒ±p kar≈üƒ±lƒ±ƒüƒ±nda maddi kar≈üƒ±lƒ±k istenmesi",
                    "Yedekleme yapƒ±lmasƒ±",
                    "Sistem g√ºncellemesi"
                ],
                correct: 1
            },
            {
                question: "√áok fakt√∂rl√º kimlik doƒürulama (MFA) ne saƒülar?",
                options: [
                    "Daha kolay giri≈ü",
                    "ƒ∞nterneti hƒ±zlandƒ±rƒ±r",
                    "Birden fazla doƒürulama y√∂ntemiyle g√ºvenliƒüi artƒ±rƒ±r",
                    "Parola y√∂netimini kaldƒ±rƒ±r"
                ],
                correct: 2
            },
            {
                question: "Siber g√ºvenlikte yama (patch) ne anlama gelir?",
                options: [
                    "G√ºvenlik g√ºncellemesi",
                    "Yedekleme dosyasƒ±",
                    "Donanƒ±m y√ºkseltmesi",
                    "Antivir√ºs taramasƒ±"
                ],
                correct: 0
            },
            {
                question: "‚ÄúOrtadaki adam‚Äù saldƒ±rƒ±sƒ± nedir?",
                options: [
                    "≈ûifre kƒ±rma denemesi yapmak",
                    "ƒ∞ki sistem arasƒ±ndaki ileti≈üimi gizlice dinlemek",
                    "Veritabanƒ±nƒ± silmek",
                    "Antivir√ºs y√ºklemek"
                ],
                correct: 1
            },
            {
                question: "G√ºvenlik bilgi ve olay y√∂netim sisteminin (SIEM) g√∂revi nedir?",
                options: [
                    "E-postalarƒ± depolamak",
                    "Yedekleme yapmak",
                    "G√ºvenlik olaylarƒ±nƒ± toplamak ve analiz etmek",
                    "Aƒü trafiƒüini hƒ±zlandƒ±rmak"
                ],
                correct: 2
            },
            {
                question: "En sƒ±k kullanƒ±lan saldƒ±rƒ± t√ºrlerinden ‚ÄúSQL Injection‚Äù hangi katmanda ger√ßekle≈üir?",
                options: [
                    "Fiziksel katman",
                    "Aƒü katmanƒ±",
                    "Donanƒ±m katmanƒ±",
                    "Uygulama katmanƒ±"
                ],
                correct: 3
            },
            {
                question: "G√ºvenlik operasyon merkezi nedir?",
                options: [
                    "G√ºvenlik operasyonlarƒ±nƒ± izleyen ve y√∂neten merkez",
                    "Yazƒ±lƒ±m geli≈ütirme ekibi",
                    "Veri depolama alanƒ±",
                    "Firewall cihazƒ±"
                ],
                correct: 0
            },
            {
                question: "\"Phishing\" nedir?",
                options: [
                    "Bir t√ºr antivir√ºs yazƒ±lƒ±mƒ±",
                    "Sahte e-postalar veya mesajlarla kullanƒ±cƒ± bilgilerini √ßalmaya √ßalƒ±≈üma",
                    "Counter Strike oyununda bir haritadƒ±r.",
                    "ƒ∞nternette g√ºvenli gezinmek i√ßin kullanƒ±lan mobil uygulamadƒ±r."
                ],
                correct: 1
            },
            {
                question: "A≈üaƒüƒ±dakilerden hangisi G√º√ßl√º bir ≈üifredir?",
                options: [
                    "Ad-Soyad birle≈üimi",
                    "Doƒüum Tarihi",
                    "K√º√ß√ºk b√ºy√ºk harf, rakam ve sembol kombinasyonlarƒ±ndan olu≈üan en az 10 karakter",
                    "√áocuklarƒ±n veya evcil hayvanƒ±n ismi"

                ],
                correct: 3
            },
            {
                question: "A≈üaƒüƒ±dakilerden hangisi bir firewall i≈ülevidir?",
                options: [
                    "Yetkisiz aƒü trafiƒüini engellemek",
                    "Bilgisayarda ≈üifre girmeyi saƒülamak",
                    "Yangƒ±n s√∂nd√ºrmek i√ßin kullanmak",
                    "Wifi √ßekim kapasitesini artƒ±rmak"
                ],
                correct: 0
            },
            {
                question: "Bir \"DDoS\" saldƒ±rƒ±sƒ± neyi hedefler?",
                options: [
                    "Kullanƒ±cƒ± ≈üifrelerini √ßalmak",
                    "Bir sunucuyu a≈üƒ±rƒ± y√ºkleyerek hizmet dƒ±≈üƒ± bƒ±rakmak",
                    "Bilgisayar donanƒ±mƒ±nƒ± fiziksel olarak bozmak",
                    "Kredi Kartƒ± bilgilerini ele ge√ßirmek"
                ],
                correct: 1
            },
            {
                question: "A≈üaƒüƒ±dakilerden hangisi Barikat‚Äôƒ±n servislerinden birisidir?",
                options: [
                    "Bilgisayar donanƒ±mƒ± √ºretmek",
                    "√áaƒürƒ± merkezi hizmeti vermek",
                    "Aƒülarƒ± ve sistemleri g√ºvenlik tehditlerine kar≈üƒ± korumak",
                    "Web siteleri tasarlamak"
                ],
                correct: 2
            }
        ];

        // Sorularƒ± yalnƒ±zca g√∂m√ºl√º √∂rneklerden kullan
        async function loadQuestions() {
            questions = [...sampleQuestions];
            return true;
        }

        // Rastgele 5 soru se√ßme
        function selectRandomQuestions() {
            const shuffled = [...questions].sort(() => 0.5 - Math.random());
            selectedQuestions = shuffled.slice(0, 5);
        }

        // Quiz ba≈ülatma
        async function startQuiz() {
            // Sonu√ß ekranƒ± geri d√∂n√º≈ü zamanlayƒ±cƒ±sƒ±nƒ± temizle
            if (resultAutoReturnTimeout) {
                clearTimeout(resultAutoReturnTimeout);
                resultAutoReturnTimeout = null;
            }
            showScreen('loading-screen');

            const loaded = await loadQuestions();
            if (!loaded) {
                showError('Sorular y√ºklenemedi!');
                return;
            }

            selectRandomQuestions();
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;

            showScreen('quiz-screen');
            displayQuestion();
            startTimer();
        }

        // Ekran deƒüi≈ütirme
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // Hata g√∂sterme
        function showError(message) {
            showScreen('home-screen');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            document.querySelector('#home-screen').appendChild(errorDiv);
        }

        // Soruyu g√∂sterme
        function displayQuestion() {
            const question = selectedQuestions[currentQuestionIndex];
            document.getElementById('question').textContent = question.question;

            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                button.onclick = () => selectOption(index);
                optionsDiv.appendChild(button);
            });

            // Progress bar g√ºncelleme
            const progress = ((currentQuestionIndex) / 5) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';

            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('next-btn').classList.remove('attention');
            if (nextBtnAttentionTimeout) {
                clearTimeout(nextBtnAttentionTimeout);
                nextBtnAttentionTimeout = null;
            }
            resetTimer();
        }

        // Se√ßenek se√ßme
        function selectOption(selectedIndex) {
            const question = selectedQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('.option-btn');

            // Timer'ƒ± durdur
            clearInterval(timerInterval);

            // Var olan otomatik ge√ßi≈ü zamanlayƒ±cƒ±sƒ±nƒ± temizle
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }

            // T√ºm se√ßenekleri deaktif et
            options.forEach(option => option.classList.add('disabled'));

            // Doƒüru ve yanlƒ±≈ü cevaplarƒ± g√∂ster
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('wrong');
                }
            });

            // Puan hesaplama
            if (selectedIndex === question.correct) {
                score += 20;
                correctAnswers++;
            }

            // Sonraki soru butonu g√∂ster
            document.getElementById('next-btn').style.display = 'block';
            scheduleNextBtnAttention();

            // 30 saniye i√ßinde ge√ßilmezse otomatik olarak sonraki soruya ge√ß
            postTimeUpTimeout = setTimeout(() => {
                nextQuestion();
            }, 30000);
        }

        // Timer ba≈ülatma
        function startTimer() {
            timer = 30;
            updateTimerDisplay();

            timerInterval = setInterval(() => {
                timer--;
                updateTimerDisplay();

                if (timer <= 10) {
                    document.getElementById('timer').classList.add('warning');
                    document.getElementById('question').classList.add('low-blink');
                }

                if (timer <= 5) {
                    document.getElementById('timer').classList.add('critical');
                }

                if (timer <= 0) {
                    clearInterval(timerInterval);
                    timeUp();
                }
            }, 1000);
        }

        // Timer sƒ±fƒ±rlama
        function resetTimer() {
            timer = 30;
            document.getElementById('timer').classList.remove('warning');
            document.getElementById('timer').classList.remove('critical');
            document.getElementById('question').classList.remove('low-blink');
            updateTimerDisplay();
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }
        }

        // Timer g√∂r√ºnt√ºs√ºn√º g√ºncelleme
        function updateTimerDisplay() {
            document.getElementById('timer').textContent = `‚è±Ô∏è ${timer}s`;
        }

        // S√ºre bittiƒüinde
        function timeUp() {
            const options = document.querySelectorAll('.option-btn');
            const question = selectedQuestions[currentQuestionIndex];

            // T√ºm se√ßenekleri deaktif et
            options.forEach(option => option.classList.add('disabled'));

            // Doƒüru cevabƒ± g√∂ster
            options[question.correct].classList.add('correct');

            // Sonraki soru butonu g√∂ster
            document.getElementById('next-btn').style.display = 'block';
            scheduleNextBtnAttention();

            // Timer metnini g√ºncelle
            const timerDiv = document.getElementById('timer');
            timerDiv.textContent = '‚è±Ô∏è S√ºre bitti';

            // 30 saniye sonra otomatik sonraki soruya ge√ß
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
            }
            postTimeUpTimeout = setTimeout(() => {
                nextQuestion();
            }, 30000);
        }

        // Sonraki soruya ge√ßme
        function nextQuestion() {
            // Otomatik ge√ßi≈ü zamanlayƒ±cƒ±sƒ±nƒ± temizle
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }
            if (nextBtnAttentionTimeout) {
                clearTimeout(nextBtnAttentionTimeout);
                nextBtnAttentionTimeout = null;
            }
            document.getElementById('next-btn').classList.remove('attention');
            currentQuestionIndex++;

            if (currentQuestionIndex >= 5) {
                showResults();
            } else {
                displayQuestion();
                startTimer();
            }
        }

        function showResults() {
            clearInterval(timerInterval);
            showScreen('result-screen');

            // Sonu√ß bilgileri
            document.getElementById('final-score').textContent = score + ' Puan';
            document.getElementById('correct-count').textContent = correctAnswers;
            document.getElementById('wrong-count').textContent = 5 - correctAnswers;

            // Kahraman ve mesaj
            let hero = '';
            let message = '';

            if (score >= 100) {
                hero = 'ü¶æ Iron Man';
                message = 'Demir bir zƒ±rh gibi korunuyorsun, teknoloji ve siber g√ºvenlik senin i≈üin!';
            } else if (score >= 80) {
                hero = 'ü¶á Batman';
                message = 'Geceyi g√∂zetleyen bir dedektif gibi gizlilik ve zek√¢nla parlƒ±yorsun!';
            } else if (score >= 60) {
                hero = 'üï∑Ô∏è Spider-Man';
                message = 'Aƒülarƒ±nƒ± saƒülam √∂r√ºyorsun, baƒülantƒ±larƒ±nƒ± √ßok iyi kurmu≈üsun!';
            } else if (score >= 40) {
                hero = 'ü¶∏ Superman';
                message = 'U√ßabiliyorsun ama biraz daha hƒ±z kazanabilirsin!';
            } else if (score >= 20) {
                hero = '‚ö° Thor';
                message = '≈ûim≈üek gibi enerjiksin ama √ßekicini biraz daha ustaca kullanmalƒ±sƒ±n!';
            } else {
                hero = '‚ö° Thor';
                message = 'üí™ Bir Thor kadar g√º√ßl√ºs√ºn ama biraz daha √ßalƒ±≈ümalƒ±sƒ±n!';
            }

            // HTML tarafƒ±nda <span id="score-hero"></span> ve <span id="score-text"></span> olmasƒ± gerekiyor
            document.getElementById('score-hero').textContent = hero;
            document.getElementById('score-text').textContent = message;

            // 60 saniye i√ßinde tekrar oyna tƒ±klanmazsa ana ekrana d√∂n
            if (resultAutoReturnTimeout) {
                clearTimeout(resultAutoReturnTimeout);
            }
            resultAutoReturnTimeout = setTimeout(() => {
                restartQuiz();
            }, 60000);
        }


        // Quiz'i yeniden ba≈ülatma
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            clearInterval(timerInterval);
            if (postTimeUpTimeout) {
                clearTimeout(postTimeUpTimeout);
                postTimeUpTimeout = null;
            }
            if (resultAutoReturnTimeout) {
                clearTimeout(resultAutoReturnTimeout);
                resultAutoReturnTimeout = null;
            }
            showScreen('home-screen');
        }

        // Ayarlar popup fonksiyonlarƒ±
        function openSettings() {
            document.getElementById('settings-popup').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settings-popup').classList.remove('active');
        }

        // Tam ekran fonksiyonlarƒ±
        function toggleFullscreen() {
            const toggle = document.getElementById('fullscreen-toggle');

            if (!document.fullscreenElement) {
                // Tam ekrana ge√ß
                document.documentElement.requestFullscreen().then(() => {
                    toggle.classList.add('active');
                }).catch(err => {
                    console.log('Tam ekran hatasƒ±:', err);
                });
            } else {
                // Tam ekrandan √ßƒ±k
                document.exitFullscreen().then(() => {
                    toggle.classList.remove('active');
                }).catch(err => {
                    console.log('Tam ekran √ßƒ±kƒ±≈ü hatasƒ±:', err);
                });
            }
        }

        // Tam ekran durumu deƒüi≈üikliƒüini dinle
        document.addEventListener('fullscreenchange', function () {
            const toggle = document.getElementById('fullscreen-toggle');
            if (document.fullscreenElement) {
                toggle.classList.add('active');
            } else {
                toggle.classList.remove('active');
            }
        });

        // Popup dƒ±≈üƒ±na tƒ±klandƒ±ƒüƒ±nda kapat
        document.getElementById('settings-popup').addEventListener('click', function (e) {
            if (e.target === this) {
                closeSettings();
            }
        });

        // Ayarlar ikonu etkin/pasif
        function applySettingsIconState(enabled) {
            const btn = document.getElementById('settings-button');
            if (!btn) return;
            if (enabled) {
                btn.classList.remove('disabled');
            } else {
                btn.classList.add('disabled');
            }
        }

        // Ayarlar ikonunun g√∂r√ºn√ºrl√ºƒü√º (g√∂ster/gizle)
        function applySettingsIconVisibility(visible) {
            const btn = document.getElementById('settings-button');
            if (!btn) return;
            btn.style.display = visible ? '' : 'none';
        }

        // Sayfa y√ºklendiƒüinde
        window.addEventListener('load', function () {
            // Ayarlar ikonu durumunu y√ºkle (pasif/aktif)
            const stored = localStorage.getItem('settingsIconEnabled');
            const enabled = stored === null ? true : stored === 'true';
            applySettingsIconState(enabled);

            // G√∂r√ºn√ºrl√ºk durumunu y√ºkle (logo ile toggle edilecek)
            const visStored = localStorage.getItem('settingsIconVisible');
            const visible = visStored === null ? false : visStored === 'true';
            applySettingsIconVisibility(visible);

            // Kƒ±sayol: S tu≈üu ile ayarlarƒ± a√ß
            document.addEventListener('keydown', function (e) {
                if ((e.key === 's' || e.key === 'S')) {
                    openSettings();
                }
            });

            // Logo gizli buton: ayarlar ikonunu aktif/pasif yap
            const logo = document.getElementById('global-logo');
            if (logo) {
                logo.style.cursor = 'pointer';
                logo.addEventListener('click', function () {
                    // G√∂r√ºn√ºrl√ºƒü√º toggle et
                    const visStoredNow = localStorage.getItem('settingsIconVisible');
                    const visibleNow = visStoredNow === null ? false : visStoredNow === 'true';
                    const nextVisible = !visibleNow;
                    localStorage.setItem('settingsIconVisible', String(nextVisible));
                    applySettingsIconVisibility(nextVisible);
                });
            }

            // Service Worker kaydƒ± (PWA i√ßin)
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js').catch(err => {
                    console.log('Service worker kayƒ±t hatasƒ±:', err);
                });
            }
        });

        // PWA Y√ºkleme Akƒ±≈üƒ±
        let deferredInstallPrompt = null;
        const INSTALL_DISMISS_KEY = 'pwaInstallDismissedUntil';
        const INSTALL_BANNER_ID = 'install-banner';

        function isInStandaloneMode() {
            return window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
        }

        function canShowInstallBanner() {
            if (isInStandaloneMode()) return false;
            const until = localStorage.getItem(INSTALL_DISMISS_KEY);
            if (!until) return true;
            const now = Date.now();
            return now > Number(until);
        }

        function showInstallBanner() {
            const banner = document.getElementById(INSTALL_BANNER_ID);
            if (!banner) return;
            banner.style.display = 'block';
        }

        function hideInstallBanner() {
            const banner = document.getElementById(INSTALL_BANNER_ID);
            if (!banner) return;
            banner.style.display = 'none';
        }

        // beforeinstallprompt etkinliƒüi
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredInstallPrompt = e;
            if (canShowInstallBanner()) {
                showInstallBanner();
            }
        });

        // Y√ºkle butonu
        document.addEventListener('click', async (e) => {
            if ((e.target && e.target.id === 'install-cta')) {
                if (!deferredInstallPrompt) {
                    hideInstallBanner();
                    return;
                }
                deferredInstallPrompt.prompt();
                const choice = await deferredInstallPrompt.userChoice;
                deferredInstallPrompt = null;
                hideInstallBanner();
                if (choice && choice.outcome === 'dismissed') {
                    // 7 g√ºn ertele
                    const sevenDays = 7 * 24 * 60 * 60 * 1000;
                    localStorage.setItem(INSTALL_DISMISS_KEY, String(Date.now() + sevenDays));
                }
            }
        });

        // Daha sonra butonu
        document.addEventListener('click', (e) => {
            if ((e.target && e.target.id === 'install-dismiss')) {
                hideInstallBanner();
                const threeDays = 3 * 24 * 60 * 60 * 1000;
                localStorage.setItem(INSTALL_DISMISS_KEY, String(Date.now() + threeDays));
            }
        });

        // Uygulama y√ºklendiƒüinde banner'ƒ± gizle
        window.addEventListener('appinstalled', () => {
            hideInstallBanner();
            localStorage.removeItem(INSTALL_DISMISS_KEY);
        });
    </script>
</body>

</html>